{% extends 'base.html' %}
{% block content %}
<h2>Timesheet for {{ month }}/{{ year }}</h2>
<form method="post">
<table border="1">
    <tr><th>Day</th><th>Status</th><th>Hours</th></tr>
    {% for day in range(1, days+1) %}
    <tr>
        <td>{{ day }}</td>
        {% set att = attendance.get(day) %}
        <td>
            {% if att and att.submitted %}
                {% if att.status == 'Y' %}WFO{% elif att.status == 'N' %}WFH{% else %}PTO{% endif %}
            {% else %}
                <select name="status_{{day}}">
                    <option value="" {% if not att or not att.status %}selected{% endif %}>--</option>
                    <option value="Y" {% if att and att.status=='Y' %}selected{% endif %}>WFO</option>
                    <option value="N" {% if att and att.status=='N' %}selected{% endif %}>WFH</option>
                    <option value="L" {% if att and att.status=='L' %}selected{% endif %}>PTO</option>
                </select>
            {% endif %}
        </td>
        <td>
            {% if att and att.submitted %}
                {{ att.hours or '' }}
            {% else %}
                <input type="number" name="hours_{{day}}" min="0" max="24" step="0.5" value="{{ att.hours or '' }}">
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>
<button type="submit">Submit Timesheet</button>
</form>
{% endblock %}
